<!DOCTYPE html>
<html>
	<head>
		<title>机组详细</title>
		<#include "/nd2_header.html">
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1, user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
	</head>

<body>
	<div id="rrapp" data-role="main" class="ui-content" data-inset="false" data-title="机组详细">
	  <input id="groupId" type="hidden" class="form-control" value="${Session.groupId}"/>
		<!-- menu -->
		<!-- <div data-role="panel" id="menu" class="ui-bottom-sheet" data-animate="false" data-position='bottom' data-display="overlay">
			<div class='row around-xs'>
				<div class='col-xs-auto'>
					<a class='ui-bottom-sheet-link ui-btn ui-btn-inline waves-effect waves-button waves-effect waves-button' data-ajax='false' onclick="showHistory()">
						<i class="fa fa-history fa-2x" aria-hidden="true"></i><strong>历史评价</strong>
					</a>
				</div>
			</div>
		</div> -->
	
		<!-- 头部导航header -->
		<div data-role="header" data-position="fixed" class="head-li">
			<a href="#" class="ui-btn ui-btn-left" @click="goUrl"><i class="zmdi zmdi-arrow-back zmd-lg zmd-lg"></i></a>
			<h1>机组详细</h1>
			<!-- <a href="#menu" class="ui-btn ui-btn-right right-top-btn"><i class="zmdi zmdi-more-vert zmd-lg"></i></a> -->
		</div>
		
		<!-- content -->
		<div class="nd2-card card-media-right card-media-small" @click="showDetailData">
			<div class="card-title">
				<h3 class="card-primary-title">水力系统</h3>
				<h5 class="card-subtitle" typeId="126"></h5>
				<h5 class="card-subtitle" typeId="127"></h5>
				<h5 class="card-subtitle" typeId="9"></h5>
				<h5 class="card-subtitle" typeId="44"></h5>
				<h5 class="card-subtitle" typeId="128"></h5>
				<h5 class="card-subtitle" typeId="129"></h5>
				<h5 class="card-subtitle" typeId="130"></h5>
				
				<!-- <h5 class="card-subtitle">额定转速</h5> -->
				<h5 class="card-subtitle" typeId="169"></h5>
				<h5 class="card-subtitle" typeId="170"></h5>
				
				<!-- <h5 class="card-subtitle" typeId="130"></h5>
				<h5 class="card-subtitle" typeId="130"></h5> -->
			</div>
		</div>
		
		<div class="nd2-card card-media-right card-media-small" @click="showDetailData">
			<div class="card-title">
				<h3 class="card-primary-title">发电机</h3>
				<!-- 定子温度 -->
				<h5 class="card-subtitle" typeId="1"></h5>
				<h5 class="card-subtitle" typeId="2"></h5>
				<h5 class="card-subtitle" typeId="3"></h5>
				<h5 class="card-subtitle" typeId="4"></h5>
				<h5 class="card-subtitle" typeId="5"></h5>
				<h5 class="card-subtitle" typeId="6"></h5>
				<h5 class="card-subtitle" typeId="7"></h5>
				<h5 class="card-subtitle" typeId="8"></h5>
				<h5 class="card-subtitle" typeId="9"></h5>
				<h5 class="card-subtitle" typeId="10"></h5>
				<h5 class="card-subtitle" typeId="11"></h5>
				<h5 class="card-subtitle" typeId="12"></h5>
				<!-- 空冷温度 -->
				<h5 class="card-subtitle" typeId="13"></h5>
				<h5 class="card-subtitle" typeId="14"></h5>
				<h5 class="card-subtitle" typeId="15"></h5>
				<h5 class="card-subtitle" typeId="16"></h5>
				<h5 class="card-subtitle" typeId="17"></h5>
				<h5 class="card-subtitle" typeId="18"></h5>
				<h5 class="card-subtitle" typeId="19"></h5>
				<h5 class="card-subtitle" typeId="20"></h5>
				<!-- 空冷器温度 -->
				<h5 class="card-subtitle" typeId="21"></h5>
				<h5 class="card-subtitle" typeId="22"></h5>
			</div>
		</div>
		
		<div class="nd2-card card-media-right card-media-small" @click="showDetailData">
			<div class="card-title">
				<h3 class="card-primary-title">机组振动</h3>
				<!-- 振动 -->
				<h5 class="card-subtitle" typeId="65"></h5>
				<h5 class="card-subtitle" typeId="66"></h5>
				<h5 class="card-subtitle" typeId="67"></h5>
				<h5 class="card-subtitle" typeId="68"></h5>
				<!-- 摆动 -->
				<h5 class="card-subtitle" typeId="73"></h5>
				<h5 class="card-subtitle" typeId="74"></h5>
				<h5 class="card-subtitle" typeId="75"></h5>
				<h5 class="card-subtitle" typeId="76"></h5>
			</div>
		</div>
		
		<div class="nd2-card card-media-right card-media-small" @click="showDetailData">
			<div class="card-title">
				<h3 class="card-primary-title">机组轴承</h3>
				<h5 class="card-subtitle" typeId="27"></h5>
				<h5 class="card-subtitle" typeId="28"></h5>
				
				<h5 class="card-subtitle" typeId="29"></h5>
				<h5 class="card-subtitle" typeId="30"></h5>
				
				<h5 class="card-subtitle" typeId="31"></h5>
				<h5 class="card-subtitle" typeId="32"></h5>
				
				<h5 class="card-subtitle" typeId="33"></h5>
				<h5 class="card-subtitle" typeId="34"></h5>
				<h5 class="card-subtitle" typeId="35"></h5>
				<h5 class="card-subtitle" typeId="36"></h5>
				
				<h5 class="card-subtitle" typeId="37"></h5>
				<h5 class="card-subtitle" typeId="38"></h5>
				
				<h5 class="card-subtitle" typeId="39"></h5>
				<h5 class="card-subtitle" typeId="40"></h5>
				
				<h5 class="card-subtitle" typeId="41"></h5>
				<h5 class="card-subtitle" typeId="42"></h5>
				
				<h5 class="card-subtitle" typeId="43"></h5>
			</div>
		</div>		
	</div>
		<script>
		$(document).ready(function() {
		});
		var vm = new Vue({
			el:'#rrapp',
			data:{
				user:{}
			},
			methods: {
				getUser: function(){
					$.getJSON("${request.contextPath}/sys/user/info?_"+$.now(), function(r){
						vm.user = r.user;
					});
				},
				goUrl:function(){
					parent.location.href ='home.html';
				},
				showDetailData:function(groupId){
					//window.location.href = "${request.contextPath}/crewDetailed/showDetailData?groupId="+groupId;
					//parent.location.href ='group_data_detail.html';
				},
				toMyInfo: function(){
					window.location.href = "${request.contextPath}/baspatient/toMyInfo";
		        },
		        getDetailed: function(){
		        	var deptId;
		         	$.ajax({
		        		type: "GET",
		        		url: "${request.contextPath}/sys/user/info?_"+$.now(),
		        		async:false,
		        		//data: data,
		        		success : function(data) {
		        			deptId = data.user.deptId;
		        		}
		        	});
		         	
		        	var groupId = $("#groupId").val();
		        	var data = "deptId="+deptId+"&groupId="+groupId;

		         	$.ajax({
		        		type: "GET",
		        		url: "${request.contextPath}/crewDetailed/getDetailed",
		        		data: data,
		        		type : 'post',
		        		success : function(data) {
		        			//获得div数组
		        			var divArray = $(".card-title");
		        			for(var i = 0 ; i < divArray.length ; i++){
		        				//获得p标签数组
		        				var pArray = $(divArray[i]).find("h5");
		        				for(var j = 0 ; j < pArray.length ; j++){
		        					//根据模版匹配对应信息
		        					for(var x = 0 ; x < data.length ; x++){
		        						if($(pArray[j]).attr("typeId") == data[x].type_id){
		        							$(pArray[j]).text(data[x].type_name + ":" + data[x].param_value);
		        						}
		        					}
		        				}
		        			}
		        		}
		        	});
		        },
		        cxtTimer: function(){
		        	var ref = "";
		        	ref = setInterval(() => { this.getDetailed(); }, 1000);
		        }
			},
			created: function(){
				this.getUser();
				this.getDetailed();
				
				//启动定时器
				this.cxtTimer();
			}
		});
		</script>	
</body>
</html>
